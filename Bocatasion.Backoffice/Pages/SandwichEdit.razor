@page "/sandwichedit"
@page "/sandwichedit/{id}"
@using Bocatasion.Backoffice.Interfaces
@using Bocatasion.Backoffice.Models.Food

@inject IFoodService foodService
@inject NavigationManager NavManager

<h1>Edit sandwich</h1>

@if (@sandwich == null)
{
    <p>Loading...</p>
}
else
{
    <table class="table table-hover">

        <thead>
            <tr>
                <th>Image</th>
                <th>Name</th>
                <th>Description</th>
                <th>Price</th>
                <th>Available</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>
                    <img src="@sandwich.ImageUrl"
                         alt="@sandwich.Description"
                         width="80" />
                </td>
                <td class="align-middle">
                    @sandwich.Name
                </td>
                <td class="align-middle">
                    @sandwich.Description
                </td>
                <td class="align-middle text-center">
                    @sandwich.Price 💰
                </td>
                <td class="align-middle text-center">
                    @if (@sandwich.Disabled)
                    {
                        <span class="oi oi-circle-x mr-2" aria-hidden="true"></span>
                    }
                    else
                    {
                        <span class="oi oi-circle-check mr-2" aria-hidden="true"></span>
                    }
                </td>
            </tr>
        </tbody>
    </table>
}

<button type="button" class="btn btn-danger" @onclick="BackToMenu">Cancel</button>

@code {

    [Parameter]
    public string Id { get; set; }

    SandwichModel sandwich;

    protected override async Task OnInitializedAsync()
    {
        int id = int.Parse(Id);

        await base.OnInitializedAsync();
        sandwich = await foodService.GetSandwich(id);
    }

    private void BackToMenu()
    {
        NavManager.NavigateTo("sandwichlist");
    }
}
